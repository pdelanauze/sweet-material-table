<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html" />
<link rel="import" href="../paper-tooltip/paper-tooltip.html" />

<!-- Represents a single item row within a sweet-material-table element -->
<dom-module id="sweet-material-table-item">
  <template>
    <paper-tooltip>{{value}}</paper-tooltip>
    <div class="flex" id="value">{{value}}</div>
  </template>
  <script>
    Polymer({
      is: 'sweet-material-table-item',
      properties: {
        row: {
          type: Object,
          notify: true
        },
        field: {
          type: Object
        },
        value: {
          type: String,
          observer: '_valueChanged'
        }
      },
      observers: [
        '_dataChanged(row.*, field)'
      ],
      _dataChanged: function (rowData, field) {
        if (rowData && field) {
          var value = this.get('row.' + field.key);
          if (this.value !== value) {
            this.value = value;
          }
        }
      },
      _valueChanged: function (value) {
        if (this.row && this.field && this.row[this.field] !== value) {
          this.set('row.' + this.field.key, value);
        }
      }
    });
  </script>
</dom-module>